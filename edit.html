<!DOCTYPE html>
<html lang="ru">
<head>
  <meta charset="UTF-8" />
  <title>Редактор "Пузырики 2.0"</title>
  <style>
    body {
      background: #0d0d0d;
      font-family: 'Segoe UI', sans-serif;
      color: #00f2ff;
      padding: 20px;
    }
    h1 {
      text-align: center;
      font-size: 26px;
      color: #00f2ff;
      text-shadow: 0 0 10px #00f2ff;
    }
    label {
      display: block;
      margin: 10px 0 4px;
    }
    input[type="text"], select {
      width: 100%;
      padding: 6px;
      border-radius: 8px;
      border: none;
      font-size: 14px;
    }
    textarea {
      width: 100%;
      height: 120px;
      padding: 8px;
      border-radius: 8px;
      font-size: 14px;
    }
    .btn {
      margin-top: 16px;
      background: #00f2ff;
      color: #000;
      padding: 10px 20px;
      border-radius: 10px;
      border: none;
      font-weight: bold;
      font-size: 16px;
      cursor: pointer;
      box-shadow: 0 0 10px #00f2ff;
    }
    .output {
      margin-top: 20px;
      padding: 10px;
      background: #1e1e1e;
      color: #0f0;
      border-radius: 10px;
      font-size: 13px;
      word-break: break-word;
    }
    .logo {
      display: block;
      margin: 10px auto;
      width: 100px;
    }
    .footer {
      margin-top: 30px;
      text-align: center;
      font-size: 14px;
      color: #888;
    }
  </style>
</head>
<body>
  <img src="https://nikashum93.github.io/pusyriki/assets/kgb-logo.png" class="logo" alt="Логотип КГБ" />
  <h1>Редактор "Пузырики 2.0"</h1>

  <label>Список заданий (каждое с новой строки):</label>
  <textarea id="tasks"></textarea>

  <label>Финальный текст (после открытия сундука):</label>
  <input type="text" id="finalText" placeholder="Например: Молодец!" />

  <label>Изображение пузыря (опционально):</label>
  <input type="text" id="bubbleImg" placeholder="URL картинки" />

  <label>Изображение фидбека (или оставьте пустым для сундука):</label>
  <input type="text" id="finalImg" />

  <label><input type="checkbox" id="noChest" /> Без сундука</label>

  <hr />

  <label>Шрифт заданий:</label>
  <select id="taskFont">
    <option value="sans-serif">По умолчанию</option>
    <option value="Comic Sans MS, sans-serif">Comic Sans</option>
    <option value="Georgia, serif">Georgia</option>
    <option value="Cursive">Cursive</option>
    <option value="Arial, sans-serif">Arial</option>
    <option value="Verdana, sans-serif">Verdana</option>
    <option value="Trebuchet MS, sans-serif">Trebuchet</option>
  </select>

  <label>Цвет текста заданий:</label>
  <input type="color" id="taskColor" value="#ffffff" />

  <label>Цвет плашки задания:</label>
  <input type="color" id="taskBg" value="#00f2fe" />

  <label>Размер шрифта заданий (px):</label>
  <input type="number" id="taskSize" value="22" min="10" max="60" />

  <hr />

  <label>Шрифт фидбека:</label>
  <select id="feedbackFont">
    <option value="sans-serif">По умолчанию</option>
    <option value="Comic Sans MS, sans-serif">Comic Sans</option>
    <option value="Georgia, serif">Georgia</option>
    <option value="Cursive">Cursive</option>
    <option value="Arial, sans-serif">Arial</option>
    <option value="Verdana, sans-serif">Verdana</option>
    <option value="Trebuchet MS, sans-serif">Trebuchet</option>
  </select>

  <label>Цвет текста фидбека:</label>
  <input type="color" id="feedbackColor" value="#ffffff" />

  <label>Фон плашки фидбека:</label>
  <input type="color" id="feedbackBg" value="#f39c12" />

  <label>Размер шрифта фидбека (px):</label>
  <input type="number" id="feedbackSize" value="32" min="12" max="80" />

  <label>Стиль фидбека:</label>
  <select id="feedbackStyle">
    <option value="default">Стандартный</option>
    <option value="neon">Неон</option>
    <option value="gradient">Градиент</option>
  </select>

  <hr />

  <label>Звук при лопании пузыря (mp3):</label>
  <input type="text" id="popSound" placeholder="URL звука" />

  <button class="btn" onclick="generate()">Скопировать код</button>

  <div class="output" id="output"></div>

  <div class="footer">(с) Корпорация Геймификации Будущего</div>

  <script>
    function generate() {
      const tasks = document.getElementById('tasks').value.split('\n').map(s => s.trim()).filter(Boolean);
      const params = new URLSearchParams();
      tasks.forEach((task, i) => params.append('task' + (i + 1), task));

      params.append('final', document.getElementById('finalText').value.trim());
      params.append('img', document.getElementById('bubbleImg').value.trim());
      params.append('finalImg', document.getElementById('finalImg').value.trim());

      if (document.getElementById('noChest').checked) {
        params.append('nochest', 'true');
      }

      params.append('taskFont', document.getElementById('taskFont').value);
      params.append('taskColor', document.getElementById('taskColor').value);
      params.append('taskBg', document.getElementById('taskBg').value);
      params.append('taskSize', document.getElementById('taskSize').value);

      params.append('feedbackFont', document.getElementById('feedbackFont').value);
      params.append('feedbackColor', document.getElementById('feedbackColor').value);
      params.append('feedbackBg', document.getElementById('feedbackBg').value);
      params.append('feedbackStyle', document.getElementById('feedbackStyle').value);
      params.append('feedbackSize', document.getElementById('feedbackSize').value);

      const sound = document.getElementById('popSound').value.trim();
      if (sound) params.append('popSound', sound);

      const url = `https://nikashum93.github.io/pusyriki2.0/?${params.toString()}`;
      document.getElementById('output').textContent = `<iframe src="${url}" width="100%" height="100%" frameborder="0" allowfullscreen></iframe>`;
      navigator.clipboard.writeText(`<iframe src="${url}" width="100%" height="100%" frameborder="0" allowfullscreen></iframe>`);
    }
  </script>
</body>
</html>
